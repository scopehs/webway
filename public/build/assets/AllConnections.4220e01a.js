import{J as L,u as B,K as M,o as D,b as N,r as d,c as u,f as P,g as l,w as o,e as H,i,z as b,ai as w,n as y,ao as C,ap as q,aq as R,ar as f,as as S,N as V,at as T,l as j,E as z}from"./app.947dfe37.js";import{Q as F}from"./QInput.0a5b359e.js";import{Q as J}from"./QTable.8d314c3a.js";const K={class:"q-ma-md"},O={class:"row full-width flex-center q-pt-xs myRoundTop bg-primary"},W={class:"col-12 flex flex-center"},G={class:"text-h4"},X={class:"row full-width justify-between items-center q-pb-xs"},Y={class:"col-8 q-mt-md q-mx-md"},Z={class:"row full-width"},ee={class:"col-auto q-mt-md q-mx-md"},te={style:{"min-width":"300px","max-width":"600px"}},le={class:"text-xs"},ae={class:"col-auto q-mt-md q-mx-md"},ne={style:{"min-width":"300px","max-width":"600px"}},oe={class:"text-xs"},ie={class:"col-3 flex justify-end"},me={__name:"AllConnections",setup(se){L(e=>({"60eadadb":E.value}));let s=B();M("can"),document.title="Webway - All Connections",D(async()=>{await window.Echo.private("allconnections").listen("AllConnectionUPdate",e=>{e.flag.flag==1&&(s.getConnectionLists(),s.getAllConnections()),e.flag.flag==2}),await s.getConnectionLists(),await s.getAllConnections().then(Q.value=!1)}),N(async()=>{await window.Echo.leave("allconnections")});let g=d(),k=u(()=>g.value?g.value.computedRowsNumber:0),$=d({sortBy:"Updated",descending:!1,page:1,rowsPerPage:0});u(()=>s.connections);let Q=d(!0),h=(e,a)=>a==1?e.source_sig?e.source_sig.name_id:"???":e.target_sig?e.target_sig.name_id:"???",_=d(),m=d([]),c=d([]),x=u(()=>{let e=[];return c.value.length!=0?(c.value.forEach(a=>{let n=s.connections.filter(t=>t.source_system.constellation_id==a||t.target_system.constellation_id==a);n!=null&&n.forEach(t=>{e.push(t)})}),e):s.connections}),U=u(()=>{let e=[];return m.value.length!=0?(m.value.forEach(a=>{let n=x.value.filter(t=>t.source_system.region_id==a||t.target_system.region_id==a);n!=null&&n.forEach(t=>{e.push(t)})}),e):x.value}),I=d([{name:"startRegion",required:!0,label:"Start Region",align:"left",field:e=>e.source_system.region.name,format:e=>`${e}`,sortable:!0},{name:"startCon",required:!0,label:"Start Con",align:"left",field:e=>e.source_system.constellation.name,format:e=>`${e}`,sortable:!0},{name:"From",required:!0,label:"Start System",align:"left",field:e=>e.source_system.name,format:e=>`${e}`,sortable:!0},{name:"startSig",align:"left",label:"SigID",field:e=>h(e,1),format:e=>`${e}`,sortable:!0},{name:"endRegion",required:!0,label:"End Region",align:"right",field:e=>e.target_system.region.name,format:e=>`${e}`,sortable:!0},{name:"endCon",required:!0,label:"End Con",align:"right",field:e=>e.target_system.constellation.name,format:e=>`${e}`,sortable:!0},{name:"To",label:"To",align:"right",field:e=>e.target_system.name,format:e=>`${e}`,sortable:!0},{name:"SigID",label:"SigID",align:"right",field:e=>h(e,2),format:e=>`${e}`},{name:"Type",label:"Type",align:"right",field:e=>e.type.name,format:e=>`${e}`},{name:"Updated",label:"Updated At",align:"right",field:e=>e.updated_at,format:e=>{let n=new Date(e).toISOString();return n=n.replace("T"," "),n=n.slice(0,16),n}}]),E=u(()=>{let e=50;return s.size.height-e+"px"});return(e,a)=>(H(),P("div",K,[l(J,{title:"Connections",class:"myTableConnections myRound",rows:U.value,columns:I.value,"table-class":" text-webway","table-header-class":" text-weight-bolder bg-amber","row-key":"id",dense:"",filter:_.value,ref_key:"tableRef",ref:g,dark:"",rounded:"",color:"amber","hide-bottom":"",pagination:$.value},{top:o(n=>[i("div",O,[i("div",W,[i("span",G,"Connections - "+b(k.value),1)])]),i("div",X,[i("div",Y,[i("div",Z,[i("div",ee,[i("div",te,[l(w,{rounded:"",standout:"",modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=t=>m.value=t),options:y(s).connectionRegionList,label:"Regions","option-value":"value","option-label":"text",multiple:"","emit-value":"","map-options":"","menu-shrink":"","stack-label":""},{option:o(({itemProps:t,opt:r,selected:p,toggleOption:v})=>[l(C,q(R(t)),{default:o(()=>[l(f,null,{default:o(()=>[l(S,{innerHTML:r.text},null,8,["innerHTML"])]),_:2},1024),l(f,{side:""},{default:o(()=>[l(V,{"model-value":p,"onUpdate:modelValue":A=>v(r)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"selected-item":o(t=>[l(T,{removable:"",onRemove:r=>t.removeAtIndex(t.index),tabindex:t.tabindex,color:"webChip","text-color":"white",class:"q-ma-none"},{default:o(()=>[i("span",le,b(t.opt.text),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options"])])]),i("div",ae,[i("div",ne,[l(w,{rounded:"",standout:"",modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=t=>c.value=t),options:y(s).connectionConstellationList,label:"Constellation","option-value":"value","option-label":"text",multiple:"","emit-value":"","map-options":"","menu-shrink":"","stack-label":""},{option:o(({itemProps:t,opt:r,selected:p,toggleOption:v})=>[l(C,q(R(t)),{default:o(()=>[l(f,null,{default:o(()=>[l(S,{innerHTML:r.text},null,8,["innerHTML"])]),_:2},1024),l(f,{side:""},{default:o(()=>[l(V,{"model-value":p,"onUpdate:modelValue":A=>v(r)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"selected-item":o(t=>[l(T,{removable:"",onRemove:r=>t.removeAtIndex(t.index),tabindex:t.tabindex,color:"webChip","text-color":"white",class:"q-ma-none"},{default:o(()=>[i("span",oe,b(t.opt.text),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options"])])])])]),i("div",ie,[l(F,{standout:"",rounded:"",dense:"",debounce:"300",modelValue:_.value,"onUpdate:modelValue":a[2]||(a[2]=t=>_.value=t),placeholder:"Search"},{append:o(()=>[l(j,{"q-icon":"",name:"fa-solid fa-magnifying-glass"})]),_:1},8,["modelValue"]),l(z,{flat:"",round:"",dense:"",icon:n.inFullscreen?"fullscreen_exit":"fullscreen",onClick:n.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])])]),_:1},8,["rows","columns","filter","pagination"])]))}};export{me as default};

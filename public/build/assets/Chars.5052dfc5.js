import{J as _,u as h,K as p,o as b,b as y,r as n,c as o,f as w,g as l,w as r,e as g,i as t,E as i,aE as v}from"./app.947dfe37.js";import{Q as x}from"./QTd.5e156fed.js";import{Q as C}from"./QTable.8d314c3a.js";const q={class:"q-ma-md"},k=t("div",{class:"row full-width flex-center q-pt-xs myRoundTop bg-primary"},[t("div",{class:"col-12 flex flex-center"},[t("span",{class:"text-h4"},"Chars")])],-1),B={class:"row full-width justify-between items-center q-pb-xs"},Q={class:"col-8 q-mt-md q-mx-md"},E={class:"col-3 flex justify-end"},S=["src"],M={__name:"Chars",setup(U){_(e=>({"95a02cb8":m.value})),document.title="Webway - My Chars";let a=h();p("can"),b(async()=>{await a.getAllByUserId(),window.Echo.private("user."+a.user_id).listen("CharUpdate",e=>{a.updateChars(e.flag.message)})}),y(async()=>{window.Echo.leave("user."+a.user_id)});let d=n({sortBy:"Updated",descending:!1,page:1,rowsPerPage:0}),c=n([{name:"avatar",required:!0,label:"",align:"left",style:"width: 1px",headerStyle:"width: 1px",field:e=>e.esi_char.avatar,format:e=>`${e}`,sortable:!0},{name:"name",required:!0,label:"Name",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"last",required:!0,label:"Last System",align:"left",field:e=>e.last_system?e.last_system.name:"",format:e=>`${e}`,sortable:!0},{name:"current",required:!0,label:"Current System",align:"left",field:e=>e.current_system?e.current_system.name:"",format:e=>`${e}`,sortable:!0}]),u=o(()=>a.characters.filter(e=>e.esi_char.active==1)),m=o(()=>{let e=50;return a.size.height-e+"px"});return(e,f)=>(g(),w("div",q,[l(C,{title:"Connections",class:"my-sticky-header-table myRound bg-webBack",rows:u.value,columns:c.value,"table-class":" text-webway","table-header-class":" text-weight-bolder","row-key":"id",ref:"tableRef",dark:"",rounded:"",color:"amber","hide-bottom":"",pagination:d.value},{top:r(s=>[k,t("div",B,[t("div",Q,[l(i,{color:"positive",glossy:"",rounded:"",icon:"fa-solid fa-user-astronaut",label:"Add",href:"/esi/add"})]),t("div",E,[l(i,{flat:"",round:"",dense:"",icon:s.inFullscreen?"fullscreen_exit":"fullscreen",onClick:s.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])])]),"body-cell-avatar":r(s=>[l(x,{props:s},{default:r(()=>[t("div",null,[l(v,null,{default:r(()=>[t("img",{src:s.value},null,8,S)]),_:2},1024)])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])]))}};export{M as default};

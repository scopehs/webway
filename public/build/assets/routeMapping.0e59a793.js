import{Z as xt,aO as _t,I as mt,u as wt,K as Nt,r as F,o as bt,c as Mt,aP as kt,aQ as At,aR as jt,L as Ot,e as zt,f as Lt,g as H,n as D,E as qt,w as U,Q as Et,j as Pt,aH as St,F as Ft}from"./app.947dfe37.js";var Ct=Object.defineProperty,Ht=Object.defineProperties,Tt=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,Bt=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable,X=(t,n,e)=>n in t?Ct(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,J=(t,n)=>{for(var e in n||(n={}))Bt.call(n,e)&&X(t,e,n[e]);if(nt)for(var e of nt(n))Qt.call(n,e)&&X(t,e,n[e]);return t},Rt=(t,n)=>Ht(t,Tt(n)),Dt=(t,n,e)=>(X(t,typeof n!="symbol"?n+"":n,e),e);function ut(t,n){var e,r=1;t==null&&(t=0),n==null&&(n=0);function o(){var i,f=e.length,a,c=0,u=0;for(i=0;i<f;++i)a=e[i],c+=a.x,u+=a.y;for(c=(c/f-t)*r,u=(u/f-n)*r,i=0;i<f;++i)a=e[i],a.x-=c,a.y-=u}return o.initialize=function(i){e=i},o.x=function(i){return arguments.length?(t=+i,o):t},o.y=function(i){return arguments.length?(n=+i,o):n},o.strength=function(i){return arguments.length?(r=+i,o):r},o}function Vt(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return lt(this.cover(n,e),n,e,t)}function lt(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var o,i=t._root,f={data:r},a=t._x0,c=t._y0,u=t._x1,y=t._y1,_,g,d,x,s,l,h,v;if(!i)return t._root=f,t;for(;i.length;)if((s=n>=(_=(a+u)/2))?a=_:u=_,(l=e>=(g=(c+y)/2))?c=g:y=g,o=i,!(i=i[h=l<<1|s]))return o[h]=f,t;if(d=+t._x.call(null,i.data),x=+t._y.call(null,i.data),n===d&&e===x)return f.next=i,o?o[h]=f:t._root=f,t;do o=o?o[h]=new Array(4):t._root=new Array(4),(s=n>=(_=(a+u)/2))?a=_:u=_,(l=e>=(g=(c+y)/2))?c=g:y=g;while((h=l<<1|s)===(v=(x>=g)<<1|d>=_));return o[v]=i,o[h]=f,t}function Zt(t){var n,e,r=t.length,o,i,f=new Array(r),a=new Array(r),c=1/0,u=1/0,y=-1/0,_=-1/0;for(e=0;e<r;++e)isNaN(o=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(f[e]=o,a[e]=i,o<c&&(c=o),o>y&&(y=o),i<u&&(u=i),i>_&&(_=i));if(c>y||u>_)return this;for(this.cover(c,u).cover(y,_),e=0;e<r;++e)lt(this,f[e],a[e],t[e]);return this}function Kt(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(e))o=(e=Math.floor(t))+1,i=(r=Math.floor(n))+1;else{for(var f=o-e||1,a=this._root,c,u;e>t||t>=o||r>n||n>=i;)switch(u=(n<r)<<1|t<e,c=new Array(4),c[u]=a,a=c,f*=2,u){case 0:o=e+f,i=r+f;break;case 1:e=o-f,i=r+f;break;case 2:o=e+f,r=i-f;break;case 3:e=o-f,r=i-f;break}this._root&&this._root.length&&(this._root=a)}return this._x0=e,this._y0=r,this._x1=o,this._y1=i,this}function $t(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function Ut(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function A(t,n,e,r,o){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=o}function Jt(t,n,e){var r,o=this._x0,i=this._y0,f,a,c,u,y=this._x1,_=this._y1,g=[],d=this._root,x,s;for(d&&g.push(new A(d,o,i,y,_)),e==null?e=1/0:(o=t-e,i=n-e,y=t+e,_=n+e,e*=e);x=g.pop();)if(!(!(d=x.node)||(f=x.x0)>y||(a=x.y0)>_||(c=x.x1)<o||(u=x.y1)<i))if(d.length){var l=(f+c)/2,h=(a+u)/2;g.push(new A(d[3],l,h,c,u),new A(d[2],f,h,l,u),new A(d[1],l,a,c,h),new A(d[0],f,a,l,h)),(s=(n>=h)<<1|t>=l)&&(x=g[g.length-1],g[g.length-1]=g[g.length-1-s],g[g.length-1-s]=x)}else{var v=t-+this._x.call(null,d.data),m=n-+this._y.call(null,d.data),p=v*v+m*m;if(p<e){var w=Math.sqrt(e=p);o=t-w,i=n-w,y=t+w,_=n+w,r=d.data}}return r}function Wt(t){if(isNaN(y=+this._x.call(null,t))||isNaN(_=+this._y.call(null,t)))return this;var n,e=this._root,r,o,i,f=this._x0,a=this._y0,c=this._x1,u=this._y1,y,_,g,d,x,s,l,h;if(!e)return this;if(e.length)for(;;){if((x=y>=(g=(f+c)/2))?f=g:c=g,(s=_>=(d=(a+u)/2))?a=d:u=d,n=e,!(e=e[l=s<<1|x]))return this;if(!e.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(r=n,h=l)}for(;e.data!==t;)if(o=e,!(e=e.next))return this;return(i=e.next)&&delete e.next,o?(i?o.next=i:delete o.next,this):n?(i?n[l]=i:delete n[l],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(r?r[h]=e:this._root=e),this):(this._root=i,this)}function Xt(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function Yt(){return this._root}function Gt(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function It(t){var n=[],e,r=this._root,o,i,f,a,c;for(r&&n.push(new A(r,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(r=e.node,i=e.x0,f=e.y0,a=e.x1,c=e.y1)&&r.length){var u=(i+a)/2,y=(f+c)/2;(o=r[3])&&n.push(new A(o,u,y,a,c)),(o=r[2])&&n.push(new A(o,i,y,u,c)),(o=r[1])&&n.push(new A(o,u,f,a,y)),(o=r[0])&&n.push(new A(o,i,f,u,y))}return this}function tn(t){var n=[],e=[],r;for(this._root&&n.push(new A(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var o=r.node;if(o.length){var i,f=r.x0,a=r.y0,c=r.x1,u=r.y1,y=(f+c)/2,_=(a+u)/2;(i=o[0])&&n.push(new A(i,f,a,y,_)),(i=o[1])&&n.push(new A(i,y,a,c,_)),(i=o[2])&&n.push(new A(i,f,_,y,u)),(i=o[3])&&n.push(new A(i,y,_,c,u))}e.push(r)}for(;r=e.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function nn(t){return t[0]}function en(t){return arguments.length?(this._x=t,this):this._x}function rn(t){return t[1]}function on(t){return arguments.length?(this._y=t,this):this._y}function I(t,n,e){var r=new tt(n==null?nn:n,e==null?rn:e,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function tt(t,n,e,r,o,i){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function et(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var j=I.prototype=tt.prototype;j.copy=function(){var t=new tt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,r;if(!n)return t;if(!n.length)return t._root=et(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var o=0;o<4;++o)(r=n.source[o])&&(r.length?e.push({source:r,target:n.target[o]=new Array(4)}):n.target[o]=et(r));return t};j.add=Vt;j.addAll=Zt;j.cover=Kt;j.data=$t;j.extent=Ut;j.find=Jt;j.remove=Wt;j.removeAll=Xt;j.root=Yt;j.size=Gt;j.visit=It;j.visitAfter=tn;j.x=en;j.y=on;function N(t){return function(){return t}}function P(t){return(t()-.5)*1e-6}function an(t){return t.x+t.vx}function un(t){return t.y+t.vy}function st(t){var n,e,r,o=1,i=1;typeof t!="function"&&(t=N(t==null?1:+t));function f(){for(var u,y=n.length,_,g,d,x,s,l,h=0;h<i;++h)for(_=I(n,an,un).visitAfter(a),u=0;u<y;++u)g=n[u],s=e[g.index],l=s*s,d=g.x+g.vx,x=g.y+g.vy,_.visit(v);function v(m,p,w,k,O){var b=m.data,z=m.r,M=s+z;if(b){if(b.index>g.index){var q=d-b.x-b.vx,E=x-b.y-b.vy,L=q*q+E*E;L<M*M&&(q===0&&(q=P(r),L+=q*q),E===0&&(E=P(r),L+=E*E),L=(M-(L=Math.sqrt(L)))/L*o,g.vx+=(q*=L)*(M=(z*=z)/(l+z)),g.vy+=(E*=L)*M,b.vx-=q*(M=1-M),b.vy-=E*M)}return}return p>d+M||k<d-M||w>x+M||O<x-M}}function a(u){if(u.data)return u.r=e[u.data.index];for(var y=u.r=0;y<4;++y)u[y]&&u[y].r>u.r&&(u.r=u[y].r)}function c(){if(n){var u,y=n.length,_;for(e=new Array(y),u=0;u<y;++u)_=n[u],e[_.index]=+t(_,u,n)}}return f.initialize=function(u,y){n=u,r=y,c()},f.iterations=function(u){return arguments.length?(i=+u,f):i},f.strength=function(u){return arguments.length?(o=+u,f):o},f.radius=function(u){return arguments.length?(t=typeof u=="function"?u:N(+u),c(),f):t},f}function ln(t){return t.index}function rt(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function ft(t){var n=ln,e=_,r,o=N(30),i,f,a,c,u,y=1;t==null&&(t=[]);function _(l){return 1/Math.min(a[l.source.index],a[l.target.index])}function g(l){for(var h=0,v=t.length;h<y;++h)for(var m=0,p,w,k,O,b,z,M;m<v;++m)p=t[m],w=p.source,k=p.target,O=k.x+k.vx-w.x-w.vx||P(u),b=k.y+k.vy-w.y-w.vy||P(u),z=Math.sqrt(O*O+b*b),z=(z-i[m])/z*l*r[m],O*=z,b*=z,k.vx-=O*(M=c[m]),k.vy-=b*M,w.vx+=O*(M=1-M),w.vy+=b*M}function d(){if(f){var l,h=f.length,v=t.length,m=new Map(f.map((w,k)=>[n(w,k,f),w])),p;for(l=0,a=new Array(h);l<v;++l)p=t[l],p.index=l,typeof p.source!="object"&&(p.source=rt(m,p.source)),typeof p.target!="object"&&(p.target=rt(m,p.target)),a[p.source.index]=(a[p.source.index]||0)+1,a[p.target.index]=(a[p.target.index]||0)+1;for(l=0,c=new Array(v);l<v;++l)p=t[l],c[l]=a[p.source.index]/(a[p.source.index]+a[p.target.index]);r=new Array(v),x(),i=new Array(v),s()}}function x(){if(f)for(var l=0,h=t.length;l<h;++l)r[l]=+e(t[l],l,t)}function s(){if(f)for(var l=0,h=t.length;l<h;++l)i[l]=+o(t[l],l,t)}return g.initialize=function(l,h){f=l,u=h,d()},g.links=function(l){return arguments.length?(t=l,d(),g):t},g.id=function(l){return arguments.length?(n=l,g):n},g.iterations=function(l){return arguments.length?(y=+l,g):y},g.strength=function(l){return arguments.length?(e=typeof l=="function"?l:N(+l),x(),g):e},g.distance=function(l){return arguments.length?(o=typeof l=="function"?l:N(+l),s(),g):o},g}var sn={value:()=>{}};function ct(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new V(e)}function V(t){this._=t}function fn(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",o=e.indexOf(".");if(o>=0&&(r=e.slice(o+1),e=e.slice(0,o)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}V.prototype=ct.prototype={constructor:V,on:function(t,n){var e=this._,r=fn(t+"",e),o,i=-1,f=r.length;if(arguments.length<2){for(;++i<f;)if((o=(t=r[i]).type)&&(o=cn(e[o],t.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++i<f;)if(o=(t=r[i]).type)e[o]=ot(e[o],t.name,n);else if(n==null)for(o in e)e[o]=ot(e[o],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new V(t)},call:function(t,n){if((o=arguments.length-2)>0)for(var e=new Array(o),r=0,o,i;r<o;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(n,e)}};function cn(t,n){for(var e=0,r=t.length,o;e<r;++e)if((o=t[e]).name===n)return o.value}function ot(t,n,e){for(var r=0,o=t.length;r<o;++r)if(t[r].name===n){t[r]=sn,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var C=0,B=0,T=0,ht=1e3,Z,Q,K=0,S=0,$=0,R=typeof performance=="object"&&performance.now?performance:Date,dt=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function vt(){return S||(dt(hn),S=R.now()+$)}function hn(){S=0}function Y(){this._call=this._time=this._next=null}Y.prototype=yt.prototype={constructor:Y,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?vt():+e)+(n==null?0:+n),!this._next&&Q!==this&&(Q?Q._next=this:Z=this,Q=this),this._call=t,this._time=e,G()},stop:function(){this._call&&(this._call=null,this._time=1/0,G())}};function yt(t,n,e){var r=new Y;return r.restart(t,n,e),r}function dn(){vt(),++C;for(var t=Z,n;t;)(n=S-t._time)>=0&&t._call.call(void 0,n),t=t._next;--C}function it(){S=(K=R.now())+$,C=B=0;try{dn()}finally{C=0,yn(),S=0}}function vn(){var t=R.now(),n=t-K;n>ht&&($-=n,K=t)}function yn(){for(var t,n=Z,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Z=e);Q=t,G(r)}function G(t){if(!C){B&&(B=clearTimeout(B));var n=t-S;n>24?(t<1/0&&(B=setTimeout(it,t-R.now()-$)),T&&(T=clearInterval(T))):(T||(K=R.now(),T=setInterval(vn,ht)),C=1,dt(it))}}const gn=1664525,pn=1013904223,at=4294967296;function xn(){let t=1;return()=>(t=(gn*t+pn)%at)/at}function _n(t){return t.x}function mn(t){return t.y}var wn=10,Nn=Math.PI*(3-Math.sqrt(5));function gt(t){var n,e=1,r=.001,o=1-Math.pow(r,1/300),i=0,f=.6,a=new Map,c=yt(_),u=ct("tick","end"),y=xn();t==null&&(t=[]);function _(){g(),u.call("tick",n),e<r&&(c.stop(),u.call("end",n))}function g(s){var l,h=t.length,v;s===void 0&&(s=1);for(var m=0;m<s;++m)for(e+=(i-e)*o,a.forEach(function(p){p(e)}),l=0;l<h;++l)v=t[l],v.fx==null?v.x+=v.vx*=f:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=f:(v.y=v.fy,v.vy=0);return n}function d(){for(var s=0,l=t.length,h;s<l;++s){if(h=t[s],h.index=s,h.fx!=null&&(h.x=h.fx),h.fy!=null&&(h.y=h.fy),isNaN(h.x)||isNaN(h.y)){var v=wn*Math.sqrt(.5+s),m=s*Nn;h.x=v*Math.cos(m),h.y=v*Math.sin(m)}(isNaN(h.vx)||isNaN(h.vy))&&(h.vx=h.vy=0)}}function x(s){return s.initialize&&s.initialize(t,y),s}return d(),n={tick:g,restart:function(){return c.restart(_),n},stop:function(){return c.stop(),n},nodes:function(s){return arguments.length?(t=s,d(),a.forEach(x),n):t},alpha:function(s){return arguments.length?(e=+s,n):e},alphaMin:function(s){return arguments.length?(r=+s,n):r},alphaDecay:function(s){return arguments.length?(o=+s,n):+o},alphaTarget:function(s){return arguments.length?(i=+s,n):i},velocityDecay:function(s){return arguments.length?(f=1-s,n):1-f},randomSource:function(s){return arguments.length?(y=s,a.forEach(x),n):y},force:function(s,l){return arguments.length>1?(l==null?a.delete(s):a.set(s,x(l)),n):a.get(s)},find:function(s,l,h){var v=0,m=t.length,p,w,k,O,b;for(h==null?h=1/0:h*=h,v=0;v<m;++v)O=t[v],p=s-O.x,w=l-O.y,k=p*p+w*w,k<h&&(b=O,h=k);return b},on:function(s,l){return arguments.length>1?(u.on(s,l),n):u.on(s)}}}function pt(){var t,n,e,r,o=N(-30),i,f=1,a=1/0,c=.81;function u(d){var x,s=t.length,l=I(t,_n,mn).visitAfter(_);for(r=d,x=0;x<s;++x)n=t[x],l.visit(g)}function y(){if(t){var d,x=t.length,s;for(i=new Array(x),d=0;d<x;++d)s=t[d],i[s.index]=+o(s,d,t)}}function _(d){var x=0,s,l,h=0,v,m,p;if(d.length){for(v=m=p=0;p<4;++p)(s=d[p])&&(l=Math.abs(s.value))&&(x+=s.value,h+=l,v+=l*s.x,m+=l*s.y);d.x=v/h,d.y=m/h}else{s=d,s.x=s.data.x,s.y=s.data.y;do x+=i[s.data.index];while(s=s.next)}d.value=x}function g(d,x,s,l){if(!d.value)return!0;var h=d.x-n.x,v=d.y-n.y,m=l-x,p=h*h+v*v;if(m*m/c<p)return p<a&&(h===0&&(h=P(e),p+=h*h),v===0&&(v=P(e),p+=v*v),p<f&&(p=Math.sqrt(f*p)),n.vx+=h*d.value*r/p,n.vy+=v*d.value*r/p),!0;if(!(d.length||p>=a)){(d.data!==n||d.next)&&(h===0&&(h=P(e),p+=h*h),v===0&&(v=P(e),p+=v*v),p<f&&(p=Math.sqrt(f*p)));do d.data!==n&&(m=i[d.data.index]*r/p,n.vx+=h*m,n.vy+=v*m);while(d=d.next)}}return u.initialize=function(d,x){t=d,e=x,y()},u.strength=function(d){return arguments.length?(o=typeof d=="function"?d:N(+d),y(),u):o},u.distanceMin=function(d){return arguments.length?(f=d*d,u):Math.sqrt(f)},u.distanceMax=function(d){return arguments.length?(a=d*d,u):Math.sqrt(a)},u.theta=function(d){return arguments.length?(c=d*d,u):Math.sqrt(c)},u}function bn(t,n,e){var r,o=N(.1),i,f;typeof t!="function"&&(t=N(+t)),n==null&&(n=0),e==null&&(e=0);function a(u){for(var y=0,_=r.length;y<_;++y){var g=r[y],d=g.x-n||1e-6,x=g.y-e||1e-6,s=Math.sqrt(d*d+x*x),l=(f[y]-s)*i[y]*u/s;g.vx+=d*l,g.vy+=x*l}}function c(){if(r){var u,y=r.length;for(i=new Array(y),f=new Array(y),u=0;u<y;++u)f[u]=+t(r[u],u,r),i[u]=isNaN(f[u])?0:+o(r[u],u,r)}}return a.initialize=function(u){r=u,c()},a.strength=function(u){return arguments.length?(o=typeof u=="function"?u:N(+u),c(),a):o},a.radius=function(u){return arguments.length?(t=typeof u=="function"?u:N(+u),c(),a):t},a.x=function(u){return arguments.length?(n=+u,a):n},a.y=function(u){return arguments.length?(e=+u,a):e},a}function Mn(t){var n=N(.1),e,r,o;typeof t!="function"&&(t=N(t==null?0:+t));function i(a){for(var c=0,u=e.length,y;c<u;++c)y=e[c],y.vx+=(o[c]-y.x)*r[c]*a}function f(){if(e){var a,c=e.length;for(r=new Array(c),o=new Array(c),a=0;a<c;++a)r[a]=isNaN(o[a]=+t(e[a],a,e))?0:+n(e[a],a,e)}}return i.initialize=function(a){e=a,f()},i.strength=function(a){return arguments.length?(n=typeof a=="function"?a:N(+a),f(),i):n},i.x=function(a){return arguments.length?(t=typeof a=="function"?a:N(+a),f(),i):t},i}function kn(t){var n=N(.1),e,r,o;typeof t!="function"&&(t=N(t==null?0:+t));function i(a){for(var c=0,u=e.length,y;c<u;++c)y=e[c],y.vy+=(o[c]-y.y)*r[c]*a}function f(){if(e){var a,c=e.length;for(r=new Array(c),o=new Array(c),a=0;a<c;++a)r[a]=isNaN(o[a]=+t(e[a],a,e))?0:+n(e[a],a,e)}}return i.initialize=function(a){e=a,f()},i.strength=function(a){return arguments.length?(n=typeof a=="function"?a:N(+a),f(),i):n},i.y=function(a){return arguments.length?(t=typeof a=="function"?a:N(+a),f(),i):t},i}const An=Object.freeze(Object.defineProperty({__proto__:null,forceCenter:ut,forceCollide:st,forceLink:ft,forceManyBody:pt,forceRadial:bn,forceSimulation:gt,forceX:Mn,forceY:kn},Symbol.toStringTag,{value:"Module"}));class W{constructor(n={}){Dt(this,"onDeactivate"),this.options=n}activate(n){const{nodePositions:e,nodes:r,edges:o,emitter:i,svgPanZoom:f}=n;let{nodeLayouts:a,nodeLayoutMap:c}=this.buildNodeLayouts(r.value,e,{x:0,y:0});const u=this.createSimulation(a,this.forceLayoutEdges(o.value,r.value));u.on("tick",()=>{var s,l,h;for(const v of a){const m=(s=e.value)==null?void 0:s[v.id];m&&(m.x=(l=v.x)!=null?l:0,m.y=(h=v.y)!=null?h:0)}});const y=()=>{u.alpha(.1).restart()},_=s=>{for(const[l,h]of Object.entries(s)){const v=c[l];v.fx=h.x,v.fy=h.y}y()},g=s=>{var l;for(const[h,v]of Object.entries(s)){const m=this.getNodeLayout(e,h),p=(l=c==null?void 0:c[h])!=null?l:{x:0,y:0};m.value.fixed||this.options.positionFixedByDrag?(p.fx=v.x,p.fy=v.y,m.value.fixed=!0):(p.x=v.x,p.y=v.y,delete p.fx,delete p.fy)}y()},d=({node:s,event:l})=>{if(this.options.positionFixedByClickWithAltKey&&l.altKey){const h=this.getNodeLayout(e,s);let v=c==null?void 0:c[s];v||(v={id:s,x:0,y:0},c[s]=v),h.value.fixed?(delete h.value.fixed,v.x=v.fx||v.x,v.y=v.fy||v.y,delete v.fx,delete v.fy):(h.value.fixed=!0,v.fx=v.x,v.fy=v.y),y()}},x=xt(()=>[Object.keys(r.value),Object.values(o.value).map(s=>`${s.source}=${s.target}`)],()=>{const s=f.getViewArea();({nodeLayouts:a,nodeLayoutMap:c}=this.buildNodeLayouts(r.value,e,s.center)),u.nodes(a);const l=u.force("edge");l&&l.links(this.forceLayoutEdges(o.value,r.value)),y()});i.on("node:dragstart",_),i.on("node:pointermove",_),i.on("node:dragend",g),i.on("node:click",d),this.onDeactivate=()=>{u.stop(),x(),i.off("node:dragstart",_),i.off("node:pointermove",_),i.off("node:dragend",g),i.off("node:click",d)}}deactivate(){this.onDeactivate&&this.onDeactivate()}createSimulation(n,e){if(this.options.createSimulation)return this.options.createSimulation(An,n,e);{const r=ft(e).id(o=>o.id);return gt(n).force("edge",r.distance(100)).force("charge",pt()).force("collide",st(50).strength(.2)).force("center",ut().strength(.05)).alphaMin(.001)}}buildNodeLayouts(n,e,r){const o=Object.keys(n).filter(a=>!(a in e.value));for(const a of o)e.value[a]=J({},r);const i=this.forceNodeLayouts(e.value),f=Object.fromEntries(i.map(a=>[a.id,a]));return{nodeLayouts:i,nodeLayoutMap:f}}forceNodeLayouts(n){return Object.entries(n).map(([e,r])=>r.fixed?Rt(J({id:e},r),{fx:r.x,fy:r.y}):J({id:e},r))}forceLayoutEdges(n,e){return Object.values(n).filter(r=>r.source in e&&r.target in e).map(r=>({source:r.source,target:r.target}))}getNodeLayout(n,e){const r=_t(n.value,e);return r.value||(r.value={x:0,y:0}),r}}const jn={__name:"routeMapping",setup(t){let n=wt();Nt("can"),F(!1),bt(async()=>{});const e=F(1.5);let r=F(!1),o=F();F(!0);let i=()=>{c.value=!1},f=()=>{c.value=!0},a=F({nodes:{}}),c=Mt({get:()=>u.view.layoutHandler instanceof W,set:_=>{_?u.view.layoutHandler=new W:u.view.layoutHandler=new kt}});const u=At(jt({node:{label:{direction:"center",color:"#fff"},normal:{color:_=>_.current===!0?"#ff0000":"#4466cc"}},view:{layoutHandler:new W,scalingObjects:!0,minZoomLevel:.1,maxZoomLevel:16},edge:{normal:{color:"#aaa",width:3}}}));let y=async()=>{await n.setRouteMapping().then(r.value=!0),setTimeout(()=>{i()},1e3)};return(_,g)=>{const d=Ot("v-network-graph");return zt(),Lt(Ft,null,[H(qt,{color:"webway",icon:"fa-solid fa-map-location-dot",label:"Mapping",flat:"",onClick:g[0]||(g[0]=x=>D(y)())}),H(St,{modelValue:r.value,"onUpdate:modelValue":g[2]||(g[2]=x=>r.value=x),onHide:D(f)},{default:U(()=>[H(Et,{class:"no-margin",style:{"max-width":"1500px",width:"2500px",height:"900px"},flat:"",dark:"",square:""},{default:U(()=>[H(Pt,{class:"row items-center"},{default:U(()=>[H(d,{ref_key:"mapRef",ref:o,"zoom-level":e.value,"onUpdate:zoomLevel":g[1]||(g[1]=x=>e.value=x),class:"graph",nodes:D(n).routeNodes,layouts:a.value,edges:D(n).routeLinks,configs:u},null,8,["zoom-level","nodes","layouts","edges","configs"])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])],64)}}},zn=mt(jn,[["__scopeId","data-v-06fe0da7"]]);export{zn as default};

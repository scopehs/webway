import{I as ee,J as te,aG as le,u as ae,K as se,d as g,o as C,b as oe,r as v,c,f as y,g as a,w as l,_ as p,e as h,i as s,l as re,F as ie,p as ne,E as S,n as u,s as V,z as f,m as ue,q as B,k as q,O as de,P as fe}from"./app.947dfe37.js";import{Q as ce}from"./QInput.0a5b359e.js";import{Q as ge}from"./QBtnGroup.c6ebf1c6.js";import{Q as d}from"./QTd.5e156fed.js";import{Q as pe}from"./QTable.8d314c3a.js";const A=m=>(de("data-v-2eaeb2c6"),m=m(),fe(),m),_e={class:"q-ma-md"},ve=A(()=>s("div",{class:"row full-width flex-center q-py-xs myRoundTop bg-primary"},[s("div",{class:"col-10 flex flex-center"},[s("span",{class:"text-h4"},"Signatures ")])],-1)),me={class:"row full-width q-pt-xs justify-between"},he={class:"col-auto flex q-pl-xs justify-start"},be={class:"col-auto"},we={class:"row full-wdith justify-around items-center"},ye=A(()=>s("div",{class:"col-auto"},[s("span",{class:"text-h4 text-webway"},[q("Ratting rights still apply - check them "),s("a",{href:"https://wiki.goonfleet.com/Ratting_Rights",target:"_blank"}," here")])],-1)),Se={class:"col-auto q-pt-xs q-pl-sm"},xe={key:0,class:"row full-wdith"},ke={class:"col-12 q-pt-sm flex flex-center"},De={class:"col-auto flex justify-end self-start"},Ie={class:"col-auto q-pt-xs q-pl-sm"},Ee={class:"text-no-wrap"},Re={class:"text-no-wrap"},Te={class:"row justify-end q-gutter-sm"},Oe={class:"col-auto"},Ce={class:"col-auto"},Ve={class:"text-no-wrap"},Be={class:"text-no-wrap"},qe={class:"text-no-warp"},Ae={class:"text-negative"},Pe={class:"text-negative"},Qe={__name:"Sigs",props:{sigID:String},setup(m){const x=m;te(e=>({"4c6009d8":Z.value}));let P=le(),i=ae(),k=se("can");const D=g(()=>p(()=>import("./index.ff6a3aa5.js"),["assets/index.ff6a3aa5.js","assets/app.947dfe37.js","assets/app.51e76855.css"])),I=g(()=>p(()=>import("./SigReportedIcon.6500793a.js"),["assets/SigReportedIcon.6500793a.js","assets/QTooltip.46988d05.js","assets/app.947dfe37.js","assets/app.51e76855.css","assets/SigReportedIcon.5fa8706a.css"])),Q=g(()=>p(()=>import("./SigReserveTag.72e6cb62.js"),["assets/SigReserveTag.72e6cb62.js","assets/app.947dfe37.js","assets/app.51e76855.css"])),L=g(()=>p(()=>import("./SigReserveButton.80f7592f.js"),["assets/SigReserveButton.80f7592f.js","assets/app.947dfe37.js","assets/app.51e76855.css"])),$=g(()=>p(()=>import("./SigDeleteButton.7af6a18e.js"),["assets/SigDeleteButton.7af6a18e.js","assets/app.947dfe37.js","assets/app.51e76855.css"])),j=g(()=>p(()=>import("./SigRouteButton.4ce0687d.js"),["assets/SigRouteButton.4ce0687d.js","assets/QTooltip.46988d05.js","assets/app.947dfe37.js","assets/app.51e76855.css"])),N=g(()=>p(()=>import("./SigGasTable.7db65747.js"),["assets/SigGasTable.7db65747.js","assets/app.947dfe37.js","assets/app.51e76855.css","assets/QInput.0a5b359e.js","assets/QTd.5e156fed.js","assets/QTr.d1fe520f.js","assets/QTable.8d314c3a.js","assets/SigGasTable.cfe20261.css"]));document.title="Webway - All Connections",C(async()=>{await U.value,G(),k("use_reserved_connection")?window.Echo.private("sigsp").listen("SigspUpdate",e=>{e.flag.flag==1&&i.updateSigs(e.flag.message),e.flag.flag==2&&i.deleteSigs(e.flag.message),e.flag.flag==3,e.flag.flag==4,e.flag.flag==6,e.flag.flag==7,e.flag.flag==8}):window.Echo.private("sigs").listen("SigsUpdate",e=>{e.flag.flag==1&&i.updateSigs(e.flag.message),e.flag.flag==2&&i.deleteSigs(e.flag.message),e.flag.flag==3,e.flag.flag==4,e.flag.flag==6,e.flag.flag==7,e.flag.flag==8}),i.getSigs().then(E.value=!1)}),oe(async()=>{window.Echo.leave("sigsp"),window.Echo.leave("sigs")});let b=v(null),E=v(!0),U=c(()=>{i.sigShow==0&&k("view_sigs")&&P.push("/mapping")}),G=()=>{x.sigID&&(b.value=parseInt(x.sigID))},F=v({descending:!1,page:1,rowsPerPage:0});C(async()=>{await i.getGasInfo()});let R=v(0),M=()=>{R.value=1},_=v([{label:"Combat",color:"webDark",onOff:!1,value:5},{label:"Data",color:"webDark",onOff:!1,value:3},{label:"Gas",color:"webDark",onOff:!1,value:4},{label:"Ore",color:"webDark",onOff:!1,value:6},{label:"Relic",color:"webDark",onOff:!1,value:2}]),z=(e,o)=>{e.onOff?(_.value[o].color="webDark",_.value[o].onOff=!1):(_.value[o].color="primary",_.value[o].onOff=!0)},J=e=>{var o=e.reserve.length,t=!1;if(X.value)return!1;if(o>0){var r=e.reserve;if(r=r.filter(n=>n.user_id==i.user_id),r.length==1)t=!1;else return!0}else t=!0;return t},K=e=>{var o=e.replace("Site","");return o},W=c(()=>{let e=[],o=[];return o=_.value.filter(t=>t.onOff==!0),o.length!=0?(o.forEach(t=>{let r=i.sigs.filter(n=>n.group.id==t.value);r!=null&&r.forEach(n=>{e.push(n)})}),e):i.sigs}),T=c(()=>!!(R.value==0&&b.value)),H=c(()=>T.value?i.sigs.filter(e=>e.id==b.value):W.value),X=c(()=>{var e=[];i.sigs.forEach(t=>{var r=t.reserve.length;r>0&&t.reserve.forEach(n=>{var O=n.user_id;e.push(O)})}),e=e.filter(function(t,r){return e.indexOf(t)==r});var o=e.filter(t=>t==i.user_id);return o!=0}),w=c({get(){return i.sigTableSearch},set(e){return i.updateSigTableSearch(e)}});c(()=>{});let Y=v([{name:"region",label:"Region",align:"left",field:e=>e.solar_system.region.name,format:e=>`${e}`,sortable:!0},{name:"system",label:"System",align:"left",field:e=>e.solar_system.name,format:e=>`${e}`,sortable:!0},{name:"sig",label:"Sig",align:"left",field:e=>e.signature_id,format:e=>`${e}`,sortable:!0},{name:"type",label:"Type",align:"left",field:e=>e.group.name,format:e=>`${e}`,sortable:!0},{name:"name",label:"Name",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"reserved",label:"Reserved",headerStyle:"max-width: 50px",align:"left",field:e=>e.reserve,format:e=>`${e}`,sortable:!0},{name:"button",label:"",align:"left",sortable:!0},{name:"age",label:"Age",align:"left",field:e=>e.created_at,format:e=>new Date(e).getTime(),sortable:!0},{name:"updated",label:"Updated",align:"left",field:e=>e.updated_at,format:e=>new Date(e).getTime(),sortable:!0},{name:"actions",align:"right",label:"",sortable:!0}]),Z=c(()=>{let e=30;return i.size.height-e+"px"});return(e,o)=>(h(),y("div",_e,[a(pe,{title:"Connections",loading:E.value,class:"myRound bg-webBack myTableAllSigs",rows:H.value,columns:Y.value,"table-class":"text-webway","table-header-class":"bg-amber","row-key":"id",dense:"",dark:"",filter:w.value,ref:"tableRef",rounded:"","hide-bottom":"",color:"amber",pagination:F.value},{top:l(t=>[ve,s("div",me,[s("div",he,[a(ce,{rounded:"",standout:"",dense:"",debounce:"300",modelValue:w.value,"onUpdate:modelValue":o[0]||(o[0]=r=>w.value=r),clearable:"",placeholder:"Search"},{append:l(()=>[a(re,{name:"fa-solid fa-magnifying-glass"})]),_:1},8,["modelValue"])]),s("div",be,[s("div",we,[ye,s("div",Se,[a(ge,{rounded:""},{default:l(()=>[(h(!0),y(ie,null,ne(_.value,(r,n)=>(h(),B(S,{key:n,color:r.color,label:r.label,onClick:O=>u(z)(r,n)},null,8,["color","label","onClick"]))),128))]),_:1})])]),T.value?(h(),y("div",xe,[s("div",ke,[a(S,{color:"warning",rounded:"",label:"show all sigs",onClick:o[1]||(o[1]=r=>u(M)())})])])):V("",!0)]),s("div",De,[s("div",Ie,[a(u(N))]),a(S,{flat:"",padding:"none",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen",onClick:t.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])])]),"body-cell-region":l(t=>[a(d,{props:t},{default:l(()=>[s("div",Ee,f(t.value),1)]),_:2},1032,["props"])]),"body-cell-sig":l(t=>[a(d,{props:t},{default:l(()=>[s("div",Re,f(t.value),1)]),_:2},1032,["props"])]),"body-cell-reserved":l(t=>[a(d,{props:t},{default:l(()=>[a(ue,{"outside-arrows":"",style:{"max-width":"400px",width:"400px"}},{default:l(()=>[a(u(Q),{reserves:t.row.reserve},null,8,["reserves"])]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-button":l(t=>[a(d,{props:t},{default:l(()=>[u(J)(t.row)?(h(),B(u(L),{key:0,item:t.row},null,8,["item"])):V("",!0)]),_:2},1032,["props"])]),"body-cell-actions":l(t=>[a(d,{props:t},{default:l(()=>[s("div",Te,[s("div",Oe,[a(u(j),{item:t.row},null,8,["item"])]),s("div",Ce,[a(u($),{item:t.row},null,8,["item"])])])]),_:2},1032,["props"])]),"body-cell-type":l(t=>[a(d,{props:t},{default:l(()=>[s("div",Ve,f(u(K)(t.value)),1)]),_:2},1032,["props"])]),"body-cell-system":l(t=>[a(d,{props:t},{default:l(()=>[s("div",Be,f(t.value),1)]),_:2},1032,["props"])]),"body-cell-name":l(t=>[a(d,{props:t},{default:l(()=>[s("div",qe,[a(u(I),{item:t,side:"l"},null,8,["item"]),q(" "+f(t.value)+" ",1),a(u(I),{item:t,side:"r"},null,8,["item"])])]),_:2},1032,["props"])]),"body-cell-age":l(t=>[a(d,{props:t},{default:l(()=>[a(u(D),{interval:6e4,time:t.value},{default:l(({hours:r,minutes:n})=>[s("span",Ae,f(r)+":"+f(n),1)]),_:2},1032,["time"])]),_:2},1032,["props"])]),"body-cell-updated":l(t=>[a(d,{props:t},{default:l(()=>[a(u(D),{interval:6e4,time:t.value},{default:l(({hours:r,minutes:n})=>[s("span",Pe,f(r)+":"+f(n),1)]),_:2},1032,["time"])]),_:2},1032,["props"])]),_:1},8,["loading","rows","columns","filter","pagination"])]))}},Ge=ee(Qe,[["__scopeId","data-v-2eaeb2c6"]]);export{Ge as default};

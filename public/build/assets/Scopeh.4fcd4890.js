import{J as N,a as G,u as M,K as z,aG as F,r as d,o as W,b as K,c as p,f as L,i as n,g as l,w as o,Q as _,e as Y,E as i,n as u,z as X,l as Z,j as c,k as m,at as C,aF as U}from"./app.947dfe37.js";import{Q as ee}from"./QBtnGroup.c6ebf1c6.js";import{Q as x}from"./QInput.0a5b359e.js";import{Q as te}from"./QTable.8d314c3a.js";const le={class:"row q-pa-md justify-around max-h-screen"},ae={class:"col-8"},oe={class:"row full-width flex-center"},se={class:"col-auto q-mt-md"},ne={class:"row full-width justify-between"},re={class:"col-6"},ie={class:"text-h6"},ue={class:"col-3 flex justify-end"},de={class:"col-3"},pe={class:"column justify-around full-height"},ce={class:"col-auto"},me={class:"col-auto"},fe={class:"col-auto"},be={__name:"Scopeh",setup(ge){N(e=>({ce414d4e:J.value}));const S=G();let v=M();z("can");let y=F(),h=d(),w=d();document.title="Webway - HOW ARER YOU ON THIS PAGE",W(async()=>{await window.Echo.private("scopeh").listen("ScopehUpdate",e=>{}),await v.getAllConnections()}),K(async()=>{await window.Echo.leave("scopeh")});let s=d({jumpBridge:!1,wormhole:!1,gate:!1}),B=p(()=>{let e=[],t=[];return s.value.jumpBridge&&e.push(3),s.value.wormhole&&e.push(2),s.value.gate&&e.push(1),e.length!=0?(e.forEach(a=>{let r=v.connections.filter(b=>b.type.id==a);r!=null&&r.forEach(b=>{t.push(b)})}),t):v.connections}),Q=p(()=>B.value),$=p(()=>h.value?h.value.computedRowsNumber:0),R=p(()=>s.value.gate?"primary":"webway"),V=p(()=>s.value.wormhole?"primary":"webway"),E=p(()=>s.value.jumpBridge?"primary":"webway"),k=d({sortBy:"Updated",descending:!1,page:1,rowsPerPage:0}),j=(e,t)=>t==1?e.source_sig?e.source_sig.name_id:"???":e.target_sig?e.target_sig.name_id:"???",f=d(),g=d(),q=async()=>{var e={data:f.value};await axios({method:"POST",withCredentials:!0,url:"api/import/jump_bridges",data:e,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(()=>{S.notify({type:"positive",position:"right",message:"Jump Bridges Updateds",timeout:2e3,classes:"myRound"}),f.value=null})},I=async()=>{var e={cookie:g.value};await axios({method:"POST",withCredentials:!0,url:"api/metrocookie",data:e,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(()=>{S.notify({type:"positive",position:"right",message:"Metro Cookie Updateds",timeout:2e3,classes:"myRound"}),g.value=null})},T=async e=>{await axios({method:"POST",withCredentials:!0,url:"api/updateoverlay/"+e,headers:{Accept:"application/json","Content-Type":"application/json"}})},A=async()=>{await axios({method:"POST",withCredentials:!0,url:"api/refreshoverlay",headers:{Accept:"application/json","Content-Type":"application/json"}})},O=()=>{let e=y.resolve({path:"/hithere"});window.open(e.href)},D=()=>{let e=y.resolve({path:"/hitherealso"});window.open(e.href)},P=()=>{let e=y.resolve({path:"/hithereagain"});window.open(e.href)},H=d([{name:"From",required:!0,label:"Start System",align:"left",field:e=>e.source_system.name,format:e=>`${e}`,sortable:!0},{name:"SigID",align:"left",label:"SigID",field:e=>j(e,1),format:e=>`${e}`,sortable:!0},{name:"To",label:"To",align:"left",field:e=>e.target_system.name,format:e=>`${e}`,sortable:!0},{name:"SigID",label:"SigID",align:"left",field:e=>j(e,2),format:e=>`${e}`},{name:"Type",label:"Type",align:"left",field:e=>e.type.name,format:e=>`${e}`},{name:"Updated",label:"Updated At",align:"left",field:e=>e.updated_at,format:e=>{let a=new Date(e).toISOString();return a=a.replace("T"," "),a=a.slice(0,16),a}}]),J=p(()=>{let e=100;return v.size.height-e+"px"});return(e,t)=>(Y(),L("div",le,[n("div",ae,[l(te,{title:"Connections",class:"my-sticky-header-table myRound",rows:Q.value,columns:H.value,"table-class":" text-webway","table-header-class":" text-weight-bolder","row-key":"id",dense:"",ref_key:"tableRef",ref:h,dark:"",filter:w.value,rounded:"",color:"amber","hide-bottom":"",pagination:k.value,"onUpdate:pagination":t[7]||(t[7]=a=>k.value=a)},{top:o(a=>[n("div",oe,[n("div",se,[l(ee,{rounded:"",glossy:"",push:"",class:"shadow-12"},{default:o(()=>[l(i,{label:"UpdateStart",onClick:t[0]||(t[0]=r=>u(T)(!0))}),l(i,{label:"UpdateDone",onClick:t[1]||(t[1]=r=>u(T)(!1))}),l(i,{label:"Refresh",onClick:t[2]||(t[2]=r=>u(A)())}),l(i,{label:"Horizon",onClick:t[3]||(t[3]=r=>u(O)())}),l(i,{label:"Prequal",onClick:t[4]||(t[4]=r=>u(D)())}),l(i,{label:"Logereader",onClick:t[5]||(t[5]=r=>u(P)())})]),_:1})])]),n("div",ne,[n("div",re,[n("span",ie,"Connections - "+X($.value),1)]),n("div",ue,[l(x,{borderless:"",dense:"",debounce:"300",modelValue:w.value,"onUpdate:modelValue":t[6]||(t[6]=r=>w.value=r),placeholder:"Search"},{append:o(()=>[l(Z,{"q-icon":"",name:"fa-solid fa-magnifying-glass"})]),_:1},8,["modelValue"]),l(i,{flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])])]),_:1},8,["rows","columns","filter","pagination"])]),n("div",de,[n("div",pe,[n("div",ce,[l(_,{class:"my-card myRound"},{default:o(()=>[l(c,{class:"bg-primary text-center text-h6"},{default:o(()=>[m(" Connection Types ")]),_:1}),l(c,null,{default:o(()=>[l(C,{selected:s.value.gate,"onUpdate:selected":t[8]||(t[8]=a=>s.value.gate=a),outline:"",color:R.value},{default:o(()=>[m(" Gate ")]),_:1},8,["selected","color"]),l(C,{selected:s.value.wormhole,"onUpdate:selected":t[9]||(t[9]=a=>s.value.wormhole=a),outline:"",color:V.value},{default:o(()=>[m(" WormHole ")]),_:1},8,["selected","color"]),l(C,{selected:s.value.jumpBridge,"onUpdate:selected":t[10]||(t[10]=a=>s.value.jumpBridge=a),outline:"",color:E.value},{default:o(()=>[m(" Jump Bridge ")]),_:1},8,["selected","color"])]),_:1})]),_:1})]),n("div",me,[l(_,{class:"my-card myRound"},{default:o(()=>[l(c,{class:"bg-primary text-center text-h6"},{default:o(()=>[m(" Jump Bridges ")]),_:1}),l(c,null,{default:o(()=>[l(x,{modelValue:f.value,"onUpdate:modelValue":t[11]||(t[11]=a=>f.value=a),label:"Enter Jump Data Here",outlined:"",type:"textarea"},null,8,["modelValue"])]),_:1}),l(U,{vertical:"",align:"center"},{default:o(()=>[l(i,{rounded:"",glossy:"",color:"warning",label:"Update",onClick:t[12]||(t[12]=a=>u(q)()),disable:!f.value},null,8,["disable"])]),_:1})]),_:1})]),n("div",fe,[l(_,{class:"my-card myRound"},{default:o(()=>[l(c,{class:"bg-primary text-center text-h6"},{default:o(()=>[m(" Metro Cookie ")]),_:1}),l(c,null,{default:o(()=>[l(x,{modelValue:g.value,"onUpdate:modelValue":t[13]||(t[13]=a=>g.value=a),label:"Enter Cookie Here",outlined:"",type:"textarea"},null,8,["modelValue"])]),_:1}),l(U,{vertical:"",align:"center"},{default:o(()=>[l(i,{rounded:"",glossy:"",color:"warning",onClick:t[14]||(t[14]=a=>u(I)()),label:"Update",disable:!g.value},null,8,["disable"])]),_:1})]),_:1})])])])]))}};export{be as default};

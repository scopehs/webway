import{I as U,J as D,d as O,u as z,K as H,o as J,b as M,r as u,c as v,f as C,i as s,g as l,w as a,_ as K,e as y,n as r,q as V,aH as W,Q as G,j as S,k as X,ai as k,aF as Y,E as b,s as T,T as Z,z as ee,O as te,P as le}from"./app.947dfe37.js";import{Q as ae}from"./QInput.0a5b359e.js";import{Q as R}from"./QTd.5e156fed.js";import{Q as se}from"./QTable.8d314c3a.js";const j=_=>(te("data-v-4976eed2"),_=_(),le(),_),oe={class:"q-ma-md"},ne={class:"row full-width justify-center"},ie={class:"col-8"},ue={class:"row full-width q-py-xs items-center myRoundTop bg-primary"},re={class:"col-1 q-pl-sm"},de={class:"row full-width q-gutter-md"},me={class:"col-auto"},pe={class:"col-auto"},ce=j(()=>s("div",{class:"col-10 flex flex-center"},[s("span",{class:"text-h4"},"Shortest Routes ")],-1)),fe=j(()=>s("div",{class:"row full-width q-pt-xs justify-between"},null,-1)),ve={class:"row full-width justify-end q-gutter-md"},_e={class:"col-auto"},he={class:"col-auto"},ye={__name:"shortestPath",setup(_){D(e=>({c705a740:N.value}));const Q=O(()=>K(()=>import("./shortedRouteButton.46610183.js"),["assets/shortedRouteButton.46610183.js","assets/app.947dfe37.js","assets/app.51e76855.css"]));document.title="Webway - Shortest";let i=z(),x=H("can");J(async()=>{i.getSystemList(),i.getShortestRoute(),window.Echo.private("shortest").listen("ShortestUpdate",e=>{e.flag.flag==1&&i.updateShortestRoute(e.flag.message),e.flag.flag==2&&i.deleteShortestRoute(e.flag.message)})}),M(async()=>{});let p=u(),h=u(!1),c=u(),d=u(),w=v(()=>c.value?i.systemlist.filter(e=>e.text.toLowerCase().indexOf(c.value)>-1):i.systemlist),F=(e,t,o)=>{t(()=>{c.value=e.toLowerCase(),w.value.length>0&&e&&(d.value=w.value[0])})},f=u(),m=u(),g=v(()=>f.value?i.systemlist.filter(e=>e.text.toLowerCase().indexOf(f.value)>-1):i.systemlist),$=(e,t,o)=>{t(()=>{f.value=e.toLowerCase(),g.value.length>0&&e&&(m.value=g.value[0])})},B=()=>{p.value=null,c.value=null,d.value=null,f.value=null,m.value=null,h.value=!1},I=async()=>{let e={startSystemID:d.value.value,endSystemID:m.value.value,notes:p.value};await axios({method:"post",withCredentials:!0,url:"/api/shorted",data:e,headers:{Accept:"application/json","Content-Type":"application/json"}}),p.value=null,c.value=null,d.value=null,f.value=null,m.value=null},L=async e=>{await axios({method:"delete",withCredentials:!0,url:"/api/shortest/"+e,headers:{Accept:"application/json","Content-Type":"application/json"}})},P=v(()=>!d.value||!m.value),q=u({descending:!1,page:1,rowsPerPage:0}),A=v(()=>i.shortestRoute),E=u([{name:"from",label:"From",align:"left",field:e=>e.start_system.name,format:e=>`${e}`,sortable:!0},{name:"to",label:"To",align:"left",field:e=>e.end_system.name,format:e=>`${e}`,sortable:!0},{name:"jumps",label:"Jumps",align:"left",field:e=>e.jumps,format:e=>`${e}`,sortable:!0},{name:"notes",label:"Notes",align:"left",field:e=>e.notes,format:e=>`${e}`,sortable:!0},{name:"actions",label:"",align:"right"}]),N=v(()=>{let e=30;return i.size.height-e+"px"});return(e,t)=>(y(),C("div",oe,[s("div",ne,[s("div",ie,[l(se,{title:"Connections",class:"myRound bg-webBack myTableAllSigs",rows:A.value,columns:E.value,"table-class":"text-webway","table-header-class":"bg-amber","row-key":"id",dense:"",dark:"",ref:"tableRef",rounded:"","hide-bottom":"",color:"amber",pagination:q.value},{top:a(o=>[s("div",ue,[s("div",re,[r(x)("edit_shortest")?(y(),V(b,{key:0,color:"warning",rounded:"",push:"",class:"myOutLineButton",dense:"",padding:"md",label:"Add",onClick:t[6]||(t[6]=n=>h.value=!0)},{default:a(()=>[l(W,{modelValue:h.value,"onUpdate:modelValue":t[5]||(t[5]=n=>h.value=n),persistent:""},{default:a(()=>[l(G,{class:"myRoundTop"},{default:a(()=>[l(S,{class:"myCardHeader bg-primary text-center text-h4"},{default:a(()=>[X(" Setting ")]),_:1}),l(S,null,{default:a(()=>[l(ae,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=n=>p.value=n),type:"text",label:"Notes",outlined:"",rounded:"",dense:""},null,8,["modelValue"])]),_:1}),l(S,null,{default:a(()=>[s("div",de,[s("div",me,[l(k,{rounded:"",dense:"",standout:"","label-color":"webway","input-debounce":"0","option-value":"value","option-label":"text",modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=n=>d.value=n),options:w.value,label:"From",clearable:"",ref:"fromSystemRef",onFilter:r(F),"map-options":"","use-input":"","hide-selected":"","fill-input":""},null,8,["modelValue","options","onFilter"])]),s("div",pe,[l(k,{rounded:"",dense:"",standout:"","label-color":"webway","input-debounce":"0","option-value":"value","option-label":"text",modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=n=>m.value=n),clearable:"",options:g.value,ref:"toSystemRef",label:"To",onFilter:r($),"map-options":"","use-input":"","hide-selected":"","fill-input":""},null,8,["modelValue","options","onFilter"])])])]),_:1}),l(Y,{align:"around"},{default:a(()=>[l(b,{rounded:"",disable:P.value,label:"Submit",color:"positive",push:"",onClick:t[3]||(t[3]=n=>r(I)())},null,8,["disable"]),l(b,{rounded:"",label:"Close",color:"negative",push:"",onClick:t[4]||(t[4]=n=>r(B)())})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):T("",!0)]),ce]),fe]),"body-cell-jumps":a(o=>[l(R,{props:o},{default:a(()=>[l(Z,{mode:"out-in","enter-active-class":"animate__animated animate__flash","leave-active-class":"animate__animated animate__flash"},{default:a(()=>[(y(),C("span",{key:`${o.value}-${o.row.id}-jumps`},ee(o.value),1))]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":a(o=>[l(R,{props:o},{default:a(()=>[s("div",ve,[s("div",_e,[l(r(Q),{item:o.row},null,8,["item"])]),s("div",he,[r(x)("edit_shortest")?(y(),V(b,{key:0,"text-color":"negative",icon:"fa-solid fa-trash-can",flat:"",round:"",padding:"none",onClick:n=>r(L)(o.row.id)},null,8,["onClick"])):T("",!0)])])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])])])]))}},xe=U(ye,[["__scopeId","data-v-4976eed2"]]);export{xe as default};

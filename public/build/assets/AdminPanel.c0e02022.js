import{J as P,u as S,K as j,o as A,b as F,r as f,c,f as i,i as t,g as o,w as a,Q as N,e as r,E as w,F as h,p,j as y,n as m,s as V,q as v,at as x,k as E,z as b,M as z}from"./app.947dfe37.js";import{Q as M}from"./QTd.5e156fed.js";import{Q as I}from"./QTable.8d314c3a.js";const L={class:"q-ma-md"},$={class:"row"},D={class:"col-12"},H={class:"row justify-around"},J={class:"col-8"},K=t("div",{class:"row full-width flex-center q-pt-xs myRoundTop bg-primary"},[t("div",{class:"col-12 flex flex-center"},[t("span",{class:"text-h4"},"Users")])],-1),O={class:"row full-width justify-end items-center q-pb-xs"},W={class:"col-3 flex justify-end"},G={class:"col-3"},X=t("div",{class:"text-h4 text-center"},"Filter",-1),Y=t("div",{class:"row"},[t("div",{class:"col"},[t("div",{class:"text-subtitle2 text-webway"},"Avoid System Type")])],-1),Z={class:"row"},ee={class:"col"},se={key:0,class:"row flex-center q-mt-md"},re={__name:"AdminPanel",setup(te){P(e=>({"2093c94f":U.value})),document.title="Webway - Admin Pannel";let l=S();j("can"),A(async()=>{await l.getUsers(),await l.getRoles()}),F(async()=>{});let g=f({sortBy:"name",descending:!1,page:1,rowsPerPage:50}),C=c(()=>{if(_.value>0){const e=new Set(l.roles.filter(s=>s.selected).map(s=>s.id));return l.usersroles.filter(s=>s.roles.some(n=>e.has(n.id)))}return l.usersroles}),k=c(()=>l.roles),_=c(()=>l.roles.filter(d=>d.selected==!0).length),q=()=>{l.roles.forEach(e=>{e.selected&&(e.selected=!1)})},B=e=>e?"primary":"webChip",Q=e=>e?"text-primary text-weight-thin":"text-white text-weight-thin",R=c(()=>C.value),T=f([{name:"name",required:!0,label:"Name",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"roles",required:!0,label:"Roles",align:"left",field:e=>e.roles,format:e=>`${e}`,sortable:!0}]),U=c(()=>{let e=50;return l.size.height-e+"px"});return(e,d)=>(r(),i("div",L,[t("div",$,[t("div",D,[t("div",H,[t("div",J,[o(I,{class:"myTableAdminPannel myRound bg-webBack",rows:R.value,columns:T.value,"table-class":" text-webway","table-header-class":" text-weight-bolder","row-key":"id",dense:"","virtual-scroll":"",ref:"tableRef",dark:"",rounded:"",color:"webway",pagination:g.value},{top:a(s=>[K,t("div",O,[t("div",W,[o(w,{flat:"",round:"",dense:"",icon:s.inFullscreen?"fullscreen_exit":"fullscreen",onClick:s.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])])]),"body-cell-roles":a(s=>[o(M,{props:s},{default:a(()=>[(r(!0),i(h,null,p(s.row.roles,(n,u)=>(r(),v(x,{color:"webChip","text-color":"white",class:"q-ma-none q-mr-xs",key:u},{default:a(()=>[E(b(n.name),1)]),_:2},1024))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])]),t("div",G,[o(N,{class:"my-card myRoundTop"},{default:a(()=>[o(y,{class:"bg-primary myCardHeader"},{default:a(()=>[X]),_:1}),o(y,{class:"q-py-sm"},{default:a(()=>[Y,t("div",Z,[t("div",ee,[(r(!0),i(h,null,p(k.value,(s,n)=>(r(),v(x,{key:n,selected:s.selected,"onUpdate:selected":u=>s.selected=u,clickable:"",dense:"",color:m(B)(s.selected),outline:""},{default:a(()=>[t("span",{class:z(m(Q)(s.selected))},b(s.name),3)]),_:2},1032,["selected","onUpdate:selected","color"]))),128))])]),_.value>0?(r(),i("div",se,[o(w,{color:"warning",rounded:"",push:"",class:"myOutLineButton",dense:"",padding:"md",label:"Clear",onClick:m(q)},null,8,["onClick"])])):V("",!0)]),_:1})]),_:1})])])])])]))}};export{re as default};

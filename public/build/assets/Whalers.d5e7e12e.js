import{I as z,J as A,a as F,u as U,d as O,o as D,b as M,r as c,c as f,f as N,i as n,g as l,w as s,Q as J,_ as H,e as y,j as w,ai as G,n as r,ao as K,ap as X,aq as Y,ar as x,as as Z,N as ee,at as C,z as k,E as v,q as te,aE as ae,k as le,M as se,s as ne,O as oe,P as ie}from"./app.947dfe37.js";import{Q as p}from"./QTd.5e156fed.js";import{Q as re}from"./QTable.8d314c3a.js";const g=m=>(oe("data-v-4375c0fb"),m=m(),ie(),m),de={class:"q-ma-md"},ue={class:"row"},ce={class:"col-12"},fe={class:"row justify-around"},me={class:"col-2"},pe=g(()=>n("div",{class:"text-h6 text-center"},"Filter",-1)),_e={class:"text-xs"},ve={class:"col-9"},ge=g(()=>n("div",{class:"row full-width flex-center q-pt-xs myRoundTop bg-primary"},[n("div",{class:"col-12 flex flex-center"},[n("span",{class:"text-h4"},"Fishing")])],-1)),he={class:"row full-width justify-end items-center q-pb-xs"},be={class:"col-3 flex justify-end"},ye=["src"],we=g(()=>n("div",{class:"col"},null,-1)),xe={__name:"Whalers",setup(m){A(e=>({"2b4d0d2c":q.value}));const j=F();let o=U();document.title="Webway - Whaling";const S=O(()=>H(()=>import("./addDrifterWhale.b47ff3d1.js"),["assets/addDrifterWhale.b47ff3d1.js","assets/app.947dfe37.js","assets/app.51e76855.css","assets/QInput.0a5b359e.js"]));D(async()=>{window.Echo.private("whalers").listen("WhaleUpdate",e=>{e.flag.flag==1&&o.updateJoveSystem(e.flag.message),e.flag.flag==2}),await o.getJoveRegions(),await o.getJoveSystems().then(Q.value=!1)}),M(async()=>{window.Echo.leave("Whalers")});let B=c({sortBy:"lastUpdated",descending:!0,page:1,rowsPerPage:50}),Q=c(!0),R=e=>"https://image.eveonline.com/Character/"+e+"_128.jpg",T=e=>{var t=0;return t=t+1,e.filter(a=>a.name=="Coord").legnth>0&&(t=t+1),e.filter(a=>a.name=="Whalers").legnth>0&&(t=t+1),e.filter(a=>a.name=="GuardBee").legnth>0&&(t=t+1),t>0?"greenfade":"bluefade"},$=async e=>{await axios({method:"POST",withCredentials:!0,url:"api/jovesystemlastupdated/"+e.id,headers:{Accept:"application/json","Content-Type":"application/json"}})},V=async e=>{await axios({method:"POST",withCredentials:!0,url:"api/jovesystemlastupdated/"+e.id,headers:{Accept:"application/json","Content-Type":"application/json"}}),await axios({method:"POST",withCredentials:!0,url:"api/jovesystemclearSigs/"+e.system_id,headers:{Accept:"application/json","Content-Type":"application/json"}}),j.notify({type:"positive",message:e.system.name+" has been cleared of drifter holes",progress:!0,position:"top-right",icon:"fa-solid fa-spray-can-sparkles"})},d=c(),_=c([]),E=f(()=>o.joveRegionList),h=f(()=>d.value?E.value.filter(e=>e.text.toLowerCase().indexOf(d.value)>-1):o.joveRegionList),I=(e,t,a)=>{t(()=>(d.value=e.toLowerCase(),d.value===""?o.joveRegionList:h.value))},b=f(()=>o.joveSystems),L=f(()=>{let e=[],t=_.value;return t.length!=0?(t.forEach(a=>{let i=b.value.filter(u=>u.system.region_id==a.value);i!=null&&i.forEach(u=>{e.push(u)})}),e):b.value}),P=c([{name:"region",required:!0,label:"Region",align:"left",field:e=>{var t;return(t=e.system.region.name)!=null?t:null},format:e=>`${e}`,sortable:!0},{name:"system",required:!0,label:"System",align:"left",field:e=>{var t;return(t=e.system.name)!=null?t:null},format:e=>`${e}`,sortable:!0},{name:"add",label:"Add",align:"left"},{name:"check",align:"left",label:"Check"},{name:"lastUpdated",label:"Last Updated",align:"left",field:e=>e.last_updated?e.last_updated:"",format:e=>`${e}`,sortable:!0},{name:"updatedBy",label:"By",align:"left",field:e=>e.user?e.user.name:"",format:e=>`${e}`,sortable:!0},{name:"count",label:"Count",align:"center",field:e=>{var t;return(t=e.sigs_count)!=null?t:null},format:e=>`${e}`,sortable:!0},{name:"barbican",label:"Barbican",align:"center",field:e=>{var t;return(t=e.barbican)!=null?t:null},format:e=>`${e}`,sortable:!0},{name:"conflux",label:"Conflux",align:"center",field:e=>{var t;return(t=e.conflux)!=null?t:null},format:e=>`${e}`,sortable:!0},{name:"redoubt",label:"Redoubt",align:"center",field:e=>{var t;return(t=e.redoubt)!=null?t:null},format:e=>`${e}`,sortable:!0},{name:"sentinel",label:"Sentinel",align:"center",field:e=>{var t;return(t=e.sentinel)!=null?t:null},format:e=>`${e}`,sortable:!0},{name:"vidette",label:"Vidette",align:"center",field:e=>{var t;return(t=e.vidette)!=null?t:null},format:e=>`${e}`,sortable:!0},{name:"actions",align:"right"}]),q=f(()=>{let e=50;return o.size.height-e+"px"});return(e,t)=>(y(),N("div",de,[n("div",ue,[n("div",ce,[n("div",fe,[n("div",me,[l(J,{class:"my-card myRound"},{default:s(()=>[l(w,{class:"bg-primary myCardHeader"},{default:s(()=>[pe]),_:1}),l(w,null,{default:s(()=>[l(G,{rounded:"",outlined:"",modelValue:_.value,"onUpdate:modelValue":[t[0]||(t[0]=a=>_.value=a),t[1]||(t[1]=a=>d.value=null)],options:h.value,label:"Filter By Regions","option-value":"value","option-label":"text",multiple:"","use-input":"","input-debounce":"0","virtual-scroll-slice-size":"5","use-chips":"",onFilter:r(I),"map-options":"","stack-label":""},{option:s(({itemProps:a,opt:i,selected:u,toggleOption:W})=>[l(K,X(Y(a)),{default:s(()=>[l(x,null,{default:s(()=>[l(Z,{innerHTML:i.text},null,8,["innerHTML"])]),_:2},1024),l(x,{side:""},{default:s(()=>[l(ee,{"model-value":u,"onUpdate:modelValue":Ce=>W(i)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"selected-item":s(a=>[l(C,{removable:"",onRemove:i=>a.removeAtIndex(a.index),tabindex:a.tabindex,color:"webChip","text-color":"white",class:"q-ma-none"},{default:s(()=>[n("span",_e,k(a.opt.text),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options","onFilter"])]),_:1})]),_:1})]),n("div",ve,[l(re,{class:"myTableFishing myRound bg-webBack",rows:L.value,columns:P.value,"table-class":" text-webway","table-header-class":" text-weight-bolder","row-key":"id",dense:"","virtual-scroll":"",ref:"tableRef",dark:"",rounded:"",color:"webway",pagination:B.value},{top:s(a=>[ge,n("div",he,[n("div",be,[l(v,{flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])])]),"body-cell-add":s(a=>[l(p,{props:a},{default:s(()=>[l(r(S),{item:a.row},null,8,["item"])]),_:2},1032,["props"])]),"body-cell-check":s(a=>[l(p,{props:a},{default:s(()=>[l(v,{size:"xs",padding:"xs",class:"myOutLineButton",color:"warning",rounded:"",label:"Checked",onClick:i=>r($)(a.row)},null,8,["onClick"])]),_:2},1032,["props"])]),"body-cell-updatedBy":s(a=>[l(p,{props:a},{default:s(()=>[a.row.user?(y(),te(C,{key:0,size:"sm",class:se(r(T)(a.row.user.roles))},{default:s(()=>[l(ae,null,{default:s(()=>[n("img",{src:r(R)(a.row.user.main_character_id)},null,8,ye)]),_:2},1024),le(" "+k(a.row.user.name),1)]),_:2},1032,["class"])):ne("",!0)]),_:2},1032,["props"])]),"body-cell-actions":s(a=>[l(p,{props:a},{default:s(()=>[l(v,{push:"",padding:"none",size:"sm","text-color":"negative",round:"",icon:"fa-solid fa-spray-can-sparkles fa-flip-horizontal",onClick:i=>r(V)(a.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])])]),we])])]))}},Be=z(xe,[["__scopeId","data-v-4375c0fb"]]);export{Be as default};
